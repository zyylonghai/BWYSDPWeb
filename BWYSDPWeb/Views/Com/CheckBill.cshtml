@Styles.Render("~/Content/bootstrapTable")@Scripts.Render("~/bundles/bootstrapTable")@Scripts.Render("~/bundles/bootstrapTableExport")@Scripts.Render("~/bundles/TableModal")@Scripts.Render("~/Scripts/lib/laydate/laydate")@Scripts.Render("~/bundles/searchmodal")<div class="container-fluid"><div class="panel panel-default"><div class="panel-heading">检验单</div><div class="panel-body"><div class="btn-group" role="group"><button id="bwysdp_btnsave" type="button" class="btn btn-default"><i class="fa fa-fw fa-save"></i></button><button type="button" class="btn btn-default"><i class="fa fa-fw fa-cut"></i></button><button type="button" class="btn btn-default"><i class="fa fa-fw fa-copy"></i></button><button type="button" class="btn btn-default"><i class="fa fa-fw fa-clipboard"></i></button></div><br /><br />@using(Html.BeginForm("Save", "DataBase",new { sdp_pageid ="CheckBill" },FormMethod.Post,new{@class="form-horizontal" })){<div class="panel-group" id="PanelGroup1"><div class="panel panel-default"><div class="panel-heading" style="background-color:#dff0d8; text-align:left"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#PanelGroup1" href="#PanelGroup1_info">关键信息</a></h4></div><div id="PanelGroup1_info" class="panel-collapse in "><div class="panel-body"><div class="form-group"><label for="BillNo" class="col-sm-1 control-label">单据号</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_BillNo" name="CheckBill.BillNo" placeholder="单据号"></div><label for="Checker" class="col-sm-1 control-label">检验人</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_Checker" name="CheckBill.Checker" placeholder="检验人"></div><label for="matId" class="col-sm-1 control-label">物料编号</label><div class="col-sm-2"><div class="input-group"><input type="text" class="form-control" id="CheckBill_matId" name="CheckBill.matId" placeholder="物料编号"><span class="input-group-btn"><button class="btn btn-default" type="button" data-toggle="modal" data-target="#searchModal" data-whatever="物料编号"><i class="glyphicon glyphicon-search"></i></button></span></div></div><label for="Qty" class="col-sm-1 control-label">数量</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_Qty" name="CheckBill.Qty" placeholder="数量"></div></div><div class="form-group"><label for="CheckDT" class="col-sm-1 control-label">检验日期</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_CheckDT" name="CheckBill.CheckDT" placeholder="检验日期"></div><label for="CompanyId" class="col-sm-1 control-label">公司</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_CompanyId" name="CheckBill.CompanyId" placeholder="公司"></div><label for="departmentId" class="col-sm-1 control-label">部门</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_departmentId" name="CheckBill.departmentId" placeholder="部门"></div></div></div></div></div></div><div class="panel-group" id="PanelGroup2"><div class="panel panel-default"><div class="panel-heading" style="background-color:#dff0d8; text-align:left"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#PanelGroup2" href="#PanelGroup2_info">扩展信息</a></h4></div><div id="PanelGroup2_info" class="panel-collapse in "><div class="panel-body"><div class="form-group"><label for="remark" class="col-sm-1 control-label">备注</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBill_remark" name="CheckBill.remark" placeholder="备注"></div><label for="check1" class="col-sm-1 control-label">检验部位1</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBillMap_check1" name="CheckBillMap.check1" placeholder="检验部位1"></div><label for="check2" class="col-sm-1 control-label">检验部位2</label><div class="col-sm-2"><input type="text" class="form-control" id="CheckBillMap_check2" name="CheckBillMap.check2" placeholder="检验部位2"></div></div></div></div></div></div><div class="panel-group" id="GridGroup_GridGroup1"><div class="panel panel-default"><div class="panel-heading" style="background-color:#dff0d8; text-align:left"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#GridGroup_GridGroup1" href="#GridGroup_GridGroup1_info">页面表格组1</a></h4></div><div id="GridGroup_GridGroup1_info" class="panel-collapse in "><div class="panel-body"><div id="GridGroup1_toolbar" class="btn-group"><button type="button" class="btn btn-default"  data-toggle="modal" data-target="#sdp_tbmdl_GridGroup_GridGroup1" data-gridid="GridGroup1" data-deftbnm="checkDetail" data-tablenm="checkDetail" data-controlnm="CheckBill"  data-cmd="Add"><i class="glyphicon glyphicon-plus"></i>新增</button><button type="button" class="btn btn-default" onclick="return TableBtnEdit(this,'GridGroup1')" data-toggle="modal"  data-target="#sdp_tbmdl_GridGroup_GridGroup1"  data-gridid="GridGroup1" data-deftbnm="checkDetail" data-tablenm="checkDetail" data-controlnm="CheckBill"  data-cmd="Edit"><i class="glyphicon glyphicon-pencil"></i>编辑</button><button type="button" class="btn btn-default"><i class="glyphicon glyphicon-trash"></i>删除</button></div><table id="GridGroup1"></table></div></div></div></div><div class="panel-group" id="GridGroup_GridGroup2"><div class="panel panel-default"><div class="panel-heading" style="background-color:#dff0d8; text-align:left"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#GridGroup_GridGroup2" href="#GridGroup_GridGroup2_info">页面表格组2</a></h4></div><div id="GridGroup_GridGroup2_info" class="panel-collapse in "><div class="panel-body"><div id="GridGroup2_toolbar" class="btn-group"><button type="button" class="btn btn-default"  data-toggle="modal" data-target="#sdp_tbmdl_GridGroup_GridGroup2" data-gridid="GridGroup2" data-deftbnm="checkDetail" data-tablenm="checkDetail_TableStruct2" data-controlnm="CheckBill"  data-cmd="Add"><i class="glyphicon glyphicon-plus"></i>新增</button><button type="button" class="btn btn-default" onclick="return TableBtnEdit(this,'GridGroup2')" data-toggle="modal"  data-target="#sdp_tbmdl_GridGroup_GridGroup2"  data-gridid="GridGroup2" data-deftbnm="checkDetail" data-tablenm="checkDetail_TableStruct2" data-controlnm="CheckBill"  data-cmd="Edit"><i class="glyphicon glyphicon-pencil"></i>编辑</button><button type="button" class="btn btn-default"><i class="glyphicon glyphicon-trash"></i>删除</button></div><table id="GridGroup2"></table></div></div></div></div><div class="form-group" style="margin-bottom:0"><div class="col-sm-offset-2 col-sm-10 text-right"><button type="submit" class="btn btn-default">提交</button><button type="submit" class="btn btn-primary">暂存</button><button type="reset" class="btn btn-default">重置</button></div></div>} <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" style="background-color:#dff0d8"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title" id="searchModalLabel">来源主数据</h4></div><div class="modal-body"><form><table id="searchdata"></table></form></div><div class="modal-footer"><button type="button" class="btn btn-primary">确定</button><button type="button" class="btn btn-default" data-dismiss="modal">关闭</button></div></div></div></div> <div class="modal fade" id="sdp_tbmdl_GridGroup_GridGroup1" tabindex="-1" role="dialog" aria-labelledby="sdp_tbmdlbody_GridGroup_GridGroup1"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" style="background-color:#dff0d8"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title" id="sdp_tbmdlbody_GridGroup_GridGroup1">来源主数据</h4></div><div class="modal-body"><form id="sdp_GridGroup_GridGroup1_form" class="form-horizontal"><div class="form-group"><label for="RowNo" class="col-sm-1 control-label">行号</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_RowNo" name="checkDetail.RowNo" placeholder="行号"></div><label for="yingdu" class="col-sm-1 control-label">物料硬度</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_yingdu" name="checkDetail.yingdu" placeholder="物料硬度"></div><label for="naiwendu" class="col-sm-1 control-label">耐温度</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_naiwendu" name="checkDetail.naiwendu" placeholder="耐温度"></div></div><div class="form-group"><label for="xingzhuang" class="col-sm-1 control-label">形状</label><div class="col-sm-2"><div class="input-group"><input type="text" class="form-control" id="checkDetail_xingzhuang" name="checkDetail.xingzhuang" placeholder="形状"><span class="input-group-btn"><button class="btn btn-default" type="button" data-toggle="modal" data-target="#searchModal" data-whatever="形状"><i class="glyphicon glyphicon-search"></i></button></span></div></div><label for="midu" class="col-sm-1 control-label">密度</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_midu" name="checkDetail.midu" placeholder="密度"></div></div></form></div><div class="modal-footer"><button id="sdp_tbmodalbtnGridGroup_GridGroup1" type="button" class="btn btn-primary">确定</button><button type="button" class="btn btn-default" data-dismiss="modal">关闭</button></div></div></div></div> <div class="modal fade" id="sdp_tbmdl_GridGroup_GridGroup2" tabindex="-1" role="dialog" aria-labelledby="sdp_tbmdlbody_GridGroup_GridGroup2"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header" style="background-color:#dff0d8"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button><h4 class="modal-title" id="sdp_tbmdlbody_GridGroup_GridGroup2">来源主数据</h4></div><div class="modal-body"><form id="sdp_GridGroup_GridGroup2_form" class="form-horizontal"><div class="form-group"><label for="BillNo" class="col-sm-1 control-label">检验单号</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_TableStruct2_BillNo" name="checkDetail_TableStruct2.BillNo" placeholder="检验单号"></div><label for="FromRowNo" class="col-sm-1 control-label">行号</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_TableStruct2_FromRowNo" name="checkDetail_TableStruct2.FromRowNo" placeholder="行号"></div><label for="RowNo" class="col-sm-1 control-label">行号</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_TableStruct2_RowNo" name="checkDetail_TableStruct2.RowNo" placeholder="行号"></div></div><div class="form-group"><label for="testfield" class="col-sm-1 control-label">测试字段</label><div class="col-sm-2"><input type="text" class="form-control" id="checkDetail_TableStruct2_testfield" name="checkDetail_TableStruct2.testfield" placeholder="测试字段"></div></div></form></div><div class="modal-footer"><button id="sdp_tbmodalbtnGridGroup_GridGroup2" type="button" class="btn btn-primary">确定</button><button type="button" class="btn btn-default" data-dismiss="modal">关闭</button></div></div></div></div></div></div></div><script type="text/javascript">$(function (){$(window).keydown(function (e) {var key = window.event ? e.keyCode : e.which;if (key.toString()== "13") { return false;}});$('#bwysdp_progid').val("CheckBill");$('#bwysdp_dsid').val("CheckBill");$.ajax({url: " /CheckBill/BasePageLoad",data: "",type: 'Post',async: false,success: function (obj) {},error: function (XMLHttpRequest, textStatus, errorThrown) {alert(XMLHttpRequest.status.toString() + ":" + XMLHttpRequest.readyState.toString() + ", " + textStatus + errorThrown);} });var tb1 = new LibTable("GridGroup1");tb1.$table.url ="/CheckBill/BindTableData?gridid=GridGroup1&deftb=checkDetail&tableNm=checkDetail";tb1.$table.toolbar ="#GridGroup1_toolbar";tb1.$table.showFooter=true;tb1.$table.columns = [{checkbox: true,visible: true },{field:'sdp_rowid',title: 'sdp_rowid',align: 'center',visible: true},{field:'BillNo',title: '检验单号',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";},footerFormatter: function() {return '汇总'}},{field:'RowNo',title: '行号',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div readonly>" + value + "</div>";}},{field:'yingdu',title: '物料硬度',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'naiwendu',title: '耐温度',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'xingzhuang',title: '形状',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'midu',title: '密度',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}}];tb1.initialTable();$('#GridGroup1').bootstrapTable('hideColumn', 'sdp_rowid');$('#GridGroup1').bootstrapTable('hideColumn', 'BillNo');var tbmodal1=new libTableModal("sdp_tbmdl_GridGroup_GridGroup1");tbmodal1.initialModal();$('#sdp_tbmodalbtnGridGroup_GridGroup1').click(function () {tbmodal1.Confirm();});
var tb2 = new LibTable("GridGroup2");tb2.$table.url ="/com/BindTableData?gridid=GridGroup2&deftb=checkDetail&tableNm=checkDetail_TableStruct2";tb2.$table.toolbar ="#GridGroup2_toolbar";tb2.$table.columns = [{checkbox: true,visible: true },{field:'sdp_rowid',title: 'sdp_rowid',align: 'center',visible: true},{field:'BillNo',title: '检验单号',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'FromRowNo',title: '行号',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'RowNo',title: '行号',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}},{field:'testfield',title: '测试字段',align: 'center',sortable:false,formatter: function (value, row, index) {return "<div >" + value + "</div>";}}];tb2.initialTable();$('#GridGroup2').bootstrapTable('hideColumn', 'sdp_rowid');var tbmodal2=new libTableModal("sdp_tbmdl_GridGroup_GridGroup2");tbmodal2.initialModal();$('#sdp_tbmodalbtnGridGroup_GridGroup2').click(function () {tbmodal2.Confirm();});
$('#bwysdp_btnsave').click(function (){var objs=[tb1,tb2]; var datastr='['; $.each(objs,function(index,o){if(datastr.length==1){ datastr+=Serialobj(o);}else{datastr+=","+Serialobj(o);}});datastr+=']';Save(datastr);});})
laydate.render({elem: '#CheckBill_CheckDT',format: 'yyyy-MM-dd'});
laydate.render({elem: '#checkDetail_TableStruct2_testfield',format: 'yyyy-MM-dd'});</script>